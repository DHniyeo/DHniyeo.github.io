---
layout: post
date: 2024-04-08
title: "[BOJ-Code] 20057 - ë§ˆë²•ì‚¬ ìƒì–´ì™€ í† ë„¤ì´ë„"
tags: [Algorithm-êµ¬í˜„, Samsung-Coding, ]
categories: [CodingTest, Samsungê¸°ì¶œ, ]
---

[ë¬¸ì œ ë§í¬](https://www.acmicpc.net/problem/20057)


> ğŸ’¡ êµ¬í˜„/ì‹œë®¬ë ˆì´ì…˜


> **Memory   4824KB                                   Time   108ms                               Code Length   3631B**


```c++
// ë°©í–¥ ë§µ ë§Œë“¤ê¸°
//ì…ë ¥ : N, ëª¨ë˜ë§µ
//ì¶œë ¥ : í† ë„¤ì´ë„ê°€ ì†Œë©¸ë˜ì—ˆì„ë•Œ ê²©ìë°–ìœ¼ë¡œ ë‚˜ê°„ ëª¨ë˜ì˜ ì–‘

#include<iostream>
#include<cstring>
using namespace std;
int N;
int result = 0;
int A[499][499];
struct info {
	int y, x, dir;
};

int dy[] = { 0,1,0,-1 }; // ì˜¤ ì•„ë˜ ì™¼ ìœ„
int dx[] = { 1,0,-1,0 };
int LocMap[499][499];

int percentMap[5][5] = { // ì™¼ìª½ìœ¼ë¡œ ê°ˆë•Œ
	{0,0,2,0,0},
	{0,10,7,1,0},
	{5,0,0,0,0},
	{0,10,7,1,0},
	{0,0,2,0,0},
};
void Rotate() { // precentMap ì™¼ìª½ìœ¼ë¡œ ëŒë¦¬ê¸°
	int tmp[5][5];
	for (int i = 0; i < 5; i++) {
		for (int j = 0; j < 5; j++) {
			tmp[i][j] = percentMap[j][5 - 1 - i]; // ì£¼ì˜!!!
		}
	}
	memcpy(percentMap, tmp, sizeof(percentMap));
}


void printLocMap() {
	cout << endl;
	for (int i = 0; i < N; i++) {
		for (int j = 0; j < N; j++) {
			cout << LocMap[i][j] << " ";
		}
		cout << endl;
	}
}
void printpercentMap() {
	cout << endl;
	for (int i = 0; i < 5; i++) {
		for (int j = 0; j < 5; j++) {
			cout << percentMap[i][j] << " ";
		}
		cout << endl;
	}
}
void printAMap(info now) {
	cout << endl;
	for (int i = 0; i < N; i++) {
		for (int j = 0; j < N; j++) {
			if (now.y == i && now.x == j) {
				cout << "@" << " ";
			}
			else {
				cout << A[i][j] << " ";
			}
		}
		cout << endl;
	}
}

void gamestart() {
	info now = { N / 2, N / 2,LocMap[N / 2][N / 2] };
	int pastdir = LocMap[now.y][now.x];

	while (1) {
		if (now.y == 0 && now.x == 0) break;
		// í† ë„¤ì´ë„ì˜ ì´ë™

		int nextdir = LocMap[now.y][now.x];
		int ny = now.y + dy[nextdir];
		int nx = now.x + dx[nextdir];

		if (nextdir != pastdir) Rotate(); 
		pastdir = nextdir;

		// ëª¨ë˜ ë”í•´ì£¼ê¸°
		int nowSand = A[ny][nx];
		int moved_Sand = 0;
		for (int i = 0; i < 5; i++) {
			for (int j = 0; j < 5; j++) {
				int targety = ny + i - 2;
				int targetx = nx + j - 2;
				if (targety >= N || targetx >= N || targety < 0 || targetx < 0) { // ë²”ìœ„ë¥¼ ì´ˆê³¼í•˜ë©´
					result = result + (nowSand * percentMap[i][j] / 100);
					moved_Sand += (nowSand * percentMap[i][j] / 100);
				}
				else {
					A[targety][targetx] = A[targety][targetx] + (nowSand * percentMap[i][j] / 100);
					moved_Sand += (nowSand * percentMap[i][j] / 100);
				}
			}
		}
		// ì•ŒíŒŒ ì²˜ë¦¬
		int alpay = ny + dy[nextdir];
		int alpax = nx + dx[nextdir];
		if (alpay >= N || alpax >= N || alpay < 0 || alpax < 0) { // ë²”ìœ„ë¥¼ ì´ˆê³¼í•˜ë©´
			result = result + nowSand - moved_Sand;
		}
		else {
			A[alpay][alpax] = A[alpay][alpax] + nowSand - moved_Sand;
		}

		A[ny][nx] = 0; // ë¹„ì›Œì£¼ê¸°

		// ì´ë™ ì™„ë£Œ
		now = { ny,nx,nextdir };
		//printpercentMap();
		//printAMap(now);
	}
}

int dirReverse(int dir) {
	int changed;
	if (dir == 0)changed = 2;
	if (dir == 1)changed = 3;
	if (dir == 2)changed = 0;
	if (dir == 3)changed = 1;
	return changed;
}

void LocMapMake() {

	int visited[499][499];
	memset(visited, 0, sizeof(visited));
	int nowy = 0, nowx = 0;
	int nowdir = 0;
	LocMap[nowy][nowx] = dirReverse(nowdir);
	visited[nowy][nowx] = 1;

	while (1) {
		int ny = nowy + dy[nowdir];
		int nx = nowx + dx[nowdir];

		if (ny == N / 2 && nx == N / 2) {
			LocMap[ny][nx] = dirReverse(nowdir);
			break;
		}
		if (ny >= N || nx >= N || ny < 0 || nx < 0 || visited[ny][nx] == 1) { // ë²½ì„ ë§Œë‚˜ë©´ ë°©í–¥ë°”ê¾¸ê¸°
			nowdir = (nowdir + 1) % 4;
		}
		else { // ì´ë™í•˜ê¸°
			visited[ny][nx] = 1;
			LocMap[ny][nx] = dirReverse(nowdir);
			nowy = ny;
			nowx = nx;
		}
	}
}

void init() {
	cin >> N;
	for (int i = 0; i < N; i++) {
		for (int j = 0; j < N; j++) {
			cin >> A[i][j];
		}
	}
	LocMapMake();
	result = 0;
}

int main() {
	init();
	gamestart();

	cout << result;
}
```


ì´ ì½”ë“œëŠ” N x N í¬ê¸°ì˜ ê²©ìì™€ ëª¨ë˜ ë§µì„ ì…ë ¥ë°›ì•„, í† ë„¤ì´ë„ê°€ ì›€ì§ì´ë©´ì„œ ëª¨ë˜ë¥¼ í©ë¿Œë¦¬ê³  ì†Œë©¸ì‹œí‚¤ëŠ” ì‹œë®¬ë ˆì´ì…˜ì„ ìˆ˜í–‰í•˜ëŠ” í”„ë¡œê·¸ë¨ì´ë‹¤.

ë¨¼ì € í† ë„¤ì´ë„ì˜ ì´ë™ ë°©í–¥ì„ ë‚˜íƒ€ë‚´ëŠ” LocMapì„ ë§Œë“ ë‹¤. ê·¸ í›„, í† ë„¤ì´ë„ê°€ ì¤‘ì•™ì—ì„œ ì‹œì‘í•˜ì—¬ ì´ë™í•˜ë©´ì„œ ëª¨ë˜ë¥¼ í©ë¿Œë¦¬ê³  ì†Œë©¸ì‹œí‚¨ë‹¤.

í† ë„¤ì´ë„ê°€ ì´ë™í•  ë•Œë§ˆë‹¤ í•´ë‹¹ ìœ„ì¹˜ì˜ ëª¨ë˜ë¥¼ ì£¼ë³€ìœ¼ë¡œ í©ë¿Œë¦¬ê³ , ê²©ì ë°–ìœ¼ë¡œ ë‚˜ê°„ ëª¨ë˜ì˜ ì–‘ì„ ê³„ì‚°í•œë‹¤. í† ë„¤ì´ë„ê°€ ì´ë™í•œ í›„ì—ëŠ” í•´ë‹¹ ìœ„ì¹˜ë¥¼ ë¹„ì›Œì£¼ê³ , ì•ŒíŒŒ ìœ„ì¹˜ì— ë‚¨ì€ ëª¨ë˜ë¥¼ ì²˜ë¦¬í•œë‹¤.

ì´ë ‡ê²Œ í† ë„¤ì´ë„ê°€ ì´ë™í•˜ë©´ì„œ ëª¨ë˜ë¥¼ í©ë¿Œë¦¬ê³  ì†Œë©¸ì‹œí‚¨ í›„, ê²©ì ë°–ìœ¼ë¡œ ë‚˜ê°„ ëª¨ë˜ì˜ ì´ ì–‘ì„ ê²°ê³¼ë¡œ ì¶œë ¥í•œë‹¤.


---
layout: post
date: 2024-04-06
title: "[BOJ-Code] 19238 - ìŠ¤íƒ€íŠ¸ íƒì‹œ"
tags: [Algorithm-êµ¬í˜„, Algorithm-DFS/BFS, Samsung-Coding, ]
categories: [Samsungê¸°ì¶œ, CodingTest, ]
---

[ë¬¸ì œ ë§í¬](https://www.acmicpc.net/problem/19238)


> ğŸ’¡ ë„ˆë¹„ ìš°ì„  íƒìƒ‰/ê·¸ë˜í”„ ì´ë¡ /ê·¸ë˜í”„ íƒìƒ‰/êµ¬í˜„/ì‹œë®¬ë ˆì´ì…˜


> **Memory   2032KB                                   Time   4ms                               Code Length   5176B**


```c++
// 1. ì œì¼ ê°€ê¹Œìš´ ìŠ¹ê°ì„ ì°¾ì•„ì„œ ì´ë™í•œë‹¤.(BFS => ì†ë‹˜ ìœ„ì¹˜ ë°˜í™˜, íƒì‹œ ìœ„ì¹˜ ì´ë™, ì—°ë£Œ ì†Œë¹„(ì—°ë£Œ ë°”ë‹¥ ë‚¬ìœ¼ë©´ ì¢…ë£Œ))
// ê¸°ë¦„í†µ í™•ì¸
// 2. ìŠ¹ê°ì˜ ëª©ì ì§€ ê¹Œì§€ ì´ë™(BFS=> ë„ì°©í–ˆìœ¼ë©´ ì—°ë£Œ ì¶©ì „.(ê°€ëŠ” ë„ì¤‘ ì—°ë£Œ ë°”ë‹¥ ë‚¬ìœ¼ë©´ ì¢…ë£Œ)),
// ê¸°ë¦„í†µí™•ì¸
// ì—°ë£Œ ì¶©ì „

// ì…ë ¥ : ì²« ì¤„ì— N, M, ê·¸ë¦¬ê³  ì´ˆê¸° ì—°ë£Œì˜ ì–‘ì´ ì£¼ì–´ì§„ë‹¤. (2 â‰¤ N â‰¤ 20, 1 â‰¤ M â‰¤ N2, 1 â‰¤ ì´ˆê¸° ì—°ë£Œ â‰¤ 500,000)
// ì…ë ¥ : ë§µ (0ì€ ë¹ˆì¹¸, 1ì€ ë²½)
// ì…ë ¥ : ìš´ì „ ì‹œì‘í•˜ëŠ” ì¹¸ (y,x)
// ì…ë ¥ : ê° ìŠ¹ê°ì˜ 

// 1. vector ëŒë©´ì„œ ì°¾ìœ¼ë©´ ì‹œê°„ì´ˆê³¼ ë ê±°ê°™ì€ë°.. 
// 2. ë§µì„ ë§Œë“¤ì–´ ìœ„ ì™¼ ì˜¤ ì•„ë˜ - ìˆœìœ¼ë¡œ bfs ì°¾ê¸° í•˜ë©´ ë ë¼ë‚˜?
#include<iostream>
#include<vector>
#include<queue>
#include<algorithm>
using namespace std;

int N, M, oil;
int wall_map[20][20];

struct loc {
	int y, x;
};
struct info_queue {
	int y, x, cnt;
};
struct info_vector {
	int y, x, idx;
};
struct info {
	loc start, goal;
	bool finished;
};
bool cmp(info_vector first, info_vector second) {
	if (first.y < second.y) {
		return true;
	}
	else if (first.y == second.y) {
		if (first.x < second.x) {
			return true;
		}
	}
	return false;
}
loc taxi;
vector<info> vc;

void init() {
	cin >> N >> M >> oil;
	for (int i = 0; i < N; i++) {
		for (int j = 0; j < N; j++) {
			cin >> wall_map[i][j];
		}
	}
	cin >> taxi.y >> taxi.x;
	taxi.y--; taxi.x--;
	for (int i = 0; i < M; i++) {
		int py, px, gy, gx;
		cin >> py >> px >> gy >> gx;
		py--; px--; gy--; gx--;
		vc.push_back({ py,px,gy,gx, false });
	}
}
int dy[] = { -1,0,1,0 }; // ìœ„ ì™¼ ì•„ë˜ ì˜¤
int dx[] = { 0,-1,0,1 };

int check_vc(info_queue now) {
	info_queue nnow = now;
	for (int i = 0; i < vc.size(); i++) {
		if (vc[i].finished == true) continue; // ì´ë¯¸ íƒœì› ë˜ ìŠ¹ê°ì€ íƒœìš°ì§€ ì•ŠìŒ
		if (vc[i].start.y == nnow.y && vc[i].start.x == nnow.x) { // í˜„ì¬ ìœ„ì¹˜ê°€ vcì— ìˆëŠ” ë†ˆì´ë¼ë©´
			return i;
		}
	}
	return -1;
}
int findman() {
	int min_dis = 1e9;
	loc nowtaxi = taxi;
	queue<info_queue> q;
	vector<info_vector> idx_vc;
	q.push({nowtaxi.y,nowtaxi.x, 0});
	int visited[20][20] = {0};
	bool Flag = true;
	while (!q.empty()) {
		info_queue now = q.front(); q.pop();
		int idx = check_vc(now);
		if (idx != -1) { // ì¡´ì¬í•˜ëŠ” ë†ˆì´ë¼ë©´ ìµœì†Œ ê±°ë¦¬ì°¾ì•˜ë‹¤ëŠ” ê²ƒ.
			if (Flag) {
				Flag = false;
				min_dis = now.cnt; // í•œë²ˆì— í•œí•´ì„œ ìµœì†Œ ê±°ë¦¬ ê°±ì‹ 
				idx_vc.push_back({ now.y, now.x, idx });
				continue;
			}
			if (min_dis == now.cnt) { // ìµœì†Œ ê±°ë¦¬ì™€ ê°™ì€ ê±°ë¦¬ ê°’ì„ ê°€ì§€ê³  ìˆë‹¤ë©´
				idx_vc.push_back({ now.y, now.x, idx });
				continue;
			}
		}
		if (min_dis < now.cnt) break; // ê±°ë¦¬ ìµœì†Ÿê°’ë³´ë‹¤ ë” ë¨¼ ê±°ë¦¬ë©´ ì•ˆë´„.
		

		for (int i = 0; i < 4; i++) {
			int ny = now.y + dy[i];
			int nx = now.x + dx[i];
			if (ny >= N || nx >= N || ny < 0 || nx < 0) continue;
			if (wall_map[ny][nx] == 1) continue;
			if (visited[ny][nx] == 1) continue;
			visited[ny][nx] = 1;
			q.push({ ny,nx,now.cnt + 1 });
		}
	}
	if (idx_vc.size() == 0) return -1;
	sort(idx_vc.begin(), idx_vc.end(), cmp); // í–‰ì´ ê°€ì¥ ì‘ê³  ì—´ì´ ê°€ì¥ ì‘ì€ idx êµ¬í•´ëƒ„
	int index = idx_vc[0].idx;
	taxi.y = vc[index].start.y; // íƒì‹œ ìœ„ì¹˜ ê°±ì‹ 
	taxi.x = vc[index].start.x; // íƒì‹œ ìœ„ì¹˜ ê°±ì‹ 
	oil = oil - min_dis; // ê¸°ë¦„ ìµœì‹ í™”
	vc[index].finished = true;
	return index;
}
int movetogoal(int idx) {
	loc start = vc[idx].start;
	loc goal = vc[idx].goal;
	queue<info_queue> q;
	q.push({ start.y, start.x, oil });

	int visited[20][20] = { 0 };
	int spend_oil = 0;
	while (!q.empty()) {
		info_queue now = q.front(); q.pop();
		if (now.y == goal.y && now.x == goal.x) { // ëª©ì ì§€ ë„ë‹¬ì‹œ
			taxi.y = now.y; // íƒì‹œ ìœ„ì¹˜ ê°±ì‹ 
			taxi.x = now.x; // íƒì‹œ ìœ„ì¹˜ ê°±ì‹ 
			spend_oil = oil - now.cnt; // ì‚¬ìš©í•œ ê¸°ë¦„
			oil = now.cnt; // ê¸°ë¦„ ìµœì‹ í™”
			return spend_oil;
		}
		for (int i = 0; i < 4; i++) {
			int ny = now.y + dy[i];
			int nx = now.x + dx[i];
			if (ny >= N || nx >= N || ny < 0 || nx < 0) continue;
			if (wall_map[ny][nx] == 1) continue;
			if (visited[ny][nx] == 1) continue;
			visited[ny][nx] = 1;
			q.push({ ny,nx,now.cnt - 1 });
		}
	}
	return -1; // ëª»ê°€ëŠ” ê±°ë¼ë©´
}
int main() {
	init();
	// ìŠ¹ê° ì •ë³´
	
	for (int i = 0; i < M; i++) {
		//cout << i + 1 << endl;
		// 1. ì œì¼ ê°€ê¹Œìš´ ìŠ¹ê°ì„ ì°¾ì•„ì„œ ì´ë™í•œë‹¤.(BFS => ì†ë‹˜ ìœ„ì¹˜ ë°˜í™˜, íƒì‹œ ìœ„ì¹˜ ì´ë™, ì—°ë£Œ ì†Œë¹„(ì—°ë£Œ ë°”ë‹¥ ë‚¬ìœ¼ë©´ ì¢…ë£Œ))
		int idx = findman(); // vectorì˜ idx ë°˜í™˜
		//cout << vc[idx].start.y << vc[idx].start.x << endl;
		//cout << "oil : " <<oil << endl;
		if (oil<=0 || idx == -1) { // íƒœìš°ëŸ¬ ê°€ëŠ” ë„ì¤‘ì— ë°”ë‹¥ë‚¬ë‹¤ë©´ ì¢…ë£Œ
			oil = -1;
			break;
		}
		// 2. ìŠ¹ê°ì˜ ëª©ì ì§€ ê¹Œì§€ ì´ë™(BFS=> ë„ì°©í–ˆìœ¼ë©´ ì—°ë£Œ ì¶©ì „.(ê°€ëŠ” ë„ì¤‘ ì—°ë£Œ ë°”ë‹¥ ë‚¬ìœ¼ë©´ ì¢…ë£Œ)),
		int spend_oil = movetogoal(idx);
		//cout << "oil : " << oil << endl;
		if (oil<0 || spend_oil == -1) { // oilì´ 0ì¸ê²½ìš°ëŠ” ë‹¤ì‹œ ì±„ì›Œì§€ë¯€ë¡œ ì¢…ë£Œ x
			oil = -1;
			break;
		}
		// ê¸°ë¦„ ì¶©ì „
		oil = oil + spend_oil * 2;
		//cout << "oil : " << oil << endl;
	}

	cout << oil << endl;
	return 0;
}
```


ì´ ì½”ë“œëŠ” íƒì‹œê°€ ìŠ¹ê°ì„ íƒœìš°ê³  ëª©ì ì§€ë¡œ ì´ë™í•˜ëŠ” ê³¼ì •ì„ ì‹œë®¬ë ˆì´ì…˜í•˜ëŠ” í”„ë¡œê·¸ë¨ì´ë‹¤.

ìš°ì„  ì´ˆê¸° ì„¤ì •ì„ ë°›ì•„ì˜¤ê³ , ìŠ¹ê°ì˜ ì¶œë°œì§€ì™€ ëª©ì ì§€ ì •ë³´ë¥¼ ì €ì¥í•œë‹¤.

findman í•¨ìˆ˜ë¥¼ í†µí•´ íƒì‹œê°€ ê°€ì¥ ê°€ê¹Œìš´ ìŠ¹ê°ì„ ì°¾ì•„ ì¶œë°œì§€ê¹Œì§€ ì´ë™í•˜ê³ , ì—°ë£Œë¥¼ ì†Œë¹„í•œë‹¤. ë§Œì•½ ì—°ë£Œê°€ ë°”ë‹¥ë‚˜ë©´ ì¢…ë£Œëœë‹¤.

movetogoal í•¨ìˆ˜ë¥¼ í†µí•´ ìŠ¹ê°ì˜ ëª©ì ì§€ê¹Œì§€ ì´ë™í•˜ê³ , ì—°ë£Œë¥¼ ì†Œë¹„í•œë‹¤. ëª©ì ì§€ì— ë„ì°©í•˜ë©´ ì—°ë£Œë¥¼ ì¶©ì „í•˜ê³  ì†Œë¹„í•œ ì—°ë£Œì˜ ë‘ ë°°ë¥¼ ë‹¤ì‹œ ì¶©ì „í•œë‹¤.

ëª¨ë“  ìŠ¹ê°ì— ëŒ€í•´ ìœ„ ê³¼ì •ì„ ë°˜ë³µí•˜ê³ , ìµœì¢…ì ìœ¼ë¡œ ë‚¨ì€ ì—°ë£Œì˜ ì–‘ì„ ì¶œë ¥í•œë‹¤.

ì´ í”„ë¡œê·¸ë¨ì€ BFS ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•˜ì—¬ íƒì‹œì˜ ìœ„ì¹˜ì™€ ìŠ¹ê°ì˜ ìœ„ì¹˜ë¥¼ ì´ë™í•˜ë©° ì—°ë£Œë¥¼ ì†Œë¹„í•˜ê³  ì¶©ì „í•˜ëŠ” ê³¼ì •ì„ ë°˜ë³µí•œë‹¤.


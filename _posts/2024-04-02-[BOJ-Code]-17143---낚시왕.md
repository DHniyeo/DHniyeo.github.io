---
layout: post
date: 2024-04-02
title: "[BOJ-Code] 17143 - ë‚šì‹œì™•"
tags: [Algorithm-êµ¬í˜„, Samsung-Coding, ]
categories: [CodingTest, Samsungê¸°ì¶œ, ]
---

[ë¬¸ì œ ë§í¬](https://www.acmicpc.net/problem/17143)


> ğŸ’¡ êµ¬í˜„/ì‹œë®¬ë ˆì´ì…˜


> **Memory   2996KB                                   Time   420ms                               Code Length   2525B**


```c++
#include <iostream>
#include <queue>
using namespace std;
int R, C, M;
long long int score;
struct info {
	int r, c, s, d, z;
};

struct cmp {
	bool operator()(info second, info first) {
		if (first.c < second.c) {
			return true;
		}
		else if (first.c == second.c) {
			if (first.r < second.r) {
				return true;
			}
			else if (first.r == second.r) {
				if (first.z > second.z) {
					return true;
				}
			}
		}
		return false;
	};
};
priority_queue<info, vector<info>, cmp> sharks; // cê°€ ì‘ê³  rì´ì‘ê³  í¬ê¸°ê°€ í° ìˆœì„œëŒ€ë¡œ

void init() {
	cin >> R >> C >> M;
	for (int i = 0; i < M; i++) {
		int r, c, s, d, z;
		cin >> r >> c >> s >> d >> z;
		sharks.push({ r - 1, c - 1, s, d - 1, z });
	}
	score = 0;
}

void cpyqueue(priority_queue<info, vector<info>, cmp> &q1, queue<info> &q2) {
	while (!q2.empty()) {
		info tmp = q2.front();
		q2.pop();
		q1.push(tmp);
	}
}
void getshark(int x) { // ìƒì–´ ëŒì–´ ì˜¬ë¦¬ê¸°
	queue<info> eq;
	int flag = 0;
	while (!sharks.empty()) {
		info shark = sharks.top();
		sharks.pop();
		if (flag == 0 && shark.c == x) { // í•œë²ˆì— í•œí•´ì„œ
			score += shark.z;
			flag = 1;
		}
		else {
			eq.push(shark);
		}
	}
	cpyqueue(sharks, eq);
}
void move_shark() {
	priority_queue<info, vector<info>, cmp> eq; // cê°€ ì‘ê³  rì´ì‘ê³  í¬ê¸°ê°€ í° ìˆœì„œëŒ€ë¡œ
	const int dy[] = { -1,1,0,0 }; // ìœ„ ì•„ë˜ ì˜¤ë¥¸ ì™¼
	const int dx[] = { 0,0,1,-1 };

	int visited[100][100] = {}; // ë°©ë¬¸ í–ˆìœ¼ë©´ íŒ¨ìŠ¤
	while (!sharks.empty()) {
		info shark = sharks.top();
		sharks.pop();

		int Rotate;
		if (shark.d == 0 || shark.d == 1) { // ìœ„ ì•„ë˜ ì›€ì§ì¼ ì‹œ.
			Rotate = shark.s % ((R - 1) * 2);
		}
		else { // ì˜¤ë¥¸ ì™¼ ì›€ì§ì¼ ì‹œ.
			Rotate = shark.s % ((C - 1) * 2);
		}
		while (Rotate--) {
			int ny = shark.r + dy[shark.d];
			int nx = shark.c + dx[shark.d];
			if (ny >= R || nx >= C || ny < 0 || nx < 0) { // ë²”ìœ„ ì´ˆê³¼ì‹œ ë°©í–¥ì „í™˜
				if (shark.d == 0) shark.d = 1;
				else if (shark.d == 1) shark.d = 0;
				else if (shark.d == 2) shark.d = 3;
				else if (shark.d == 3) shark.d = 2;

				ny = shark.r + dy[shark.d];
				nx = shark.c + dx[shark.d];
			}
			shark.r = ny;
			shark.c = nx;
		}
		eq.push(shark); // ì˜®ê²¨ ë‹´ìŒ
	}

	while (!eq.empty()) {
		info shark = eq.top();
		eq.pop();
		if (visited[shark.r][shark.c] == 1) continue; // í° ìƒì–´ê°€ ì´ë¯¸ ë°©ë¬¸í–ˆìœ¼ë¯€ë¡œ
		visited[shark.r][shark.c] = 1;
		sharks.push(shark);
	}
}

int main() {

	init();
	for (int i = 0; i < C; i++) {
		getshark(i);
		move_shark();
	}
	cout << score;
}
```


ì´ ì½”ë“œëŠ” ìƒì–´ë“¤ì˜ ì›€ì§ì„ì„ ì‹œë®¬ë ˆì´ì…˜í•˜ì—¬ ê°€ì¥ ì˜¤ë¥¸ìª½ ì—´ë¶€í„° ìƒì–´ë¥¼ ì¡ì•„ ë¨¹ëŠ” ê³¼ì •ì„ êµ¬í˜„í•œë‹¤.

ë¨¼ì € ìƒì–´ì˜ ì •ë³´ë¥¼ ì…ë ¥ë°›ê³ , íì— ìƒì–´ë“¤ì„ í¬ê¸°ê°€ í° ìˆœì„œëŒ€ë¡œ ì €ì¥í•œë‹¤. ê·¸ í›„ì— ê° ì—´ë§ˆë‹¤ ìƒì–´ë¥¼ ì¡ì•„ ë¨¹ëŠ” í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê³ , ìƒì–´ë“¤ì„ ì´ë™ì‹œí‚¤ëŠ” í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•œë‹¤. ì´ë™í•  ë•Œ ìƒì–´ê°€ ë²½ì„ ë„˜ì–´ê°€ë©´ ë°©í–¥ì„ ë°”ê¾¸ì–´ ì´ë™í•˜ë„ë¡ ì²˜ë¦¬í•œë‹¤. ì´ ê³¼ì •ì„ ëª¨ë“  ì—´ì— ëŒ€í•´ ë°˜ë³µí•œ ë’¤, ì´ ì ìˆ˜ë¥¼ ì¶œë ¥í•œë‹¤.


---


ì²˜ìŒì—ëŠ” Queueì™€ Priority Queueë¥¼ ì‚¬ìš©í•´ì„œ í¬ê¸°ê°€ í° ìƒì–´ë“¤ì„ ìƒë‹¨ íì— ë°°ì¹˜í•˜ê³ , visited ë°°ì—´ì„ ì‚¬ìš©í•˜ì—¬ ì´ë¯¸ ë°©ë¬¸í•œ í”ì ì´ ìˆë‹¤ë©´ í° ìƒì–´ê°€ ì´ë¯¸ í•´ë‹¹ (r,c)ì¢Œí‘œì— ë°©ë¬¸ì„ í•´ìˆëŠ” ìƒíƒœì´ê¸° ë•Œë¬¸ì— ì´í›„ì— ë°©ë¬¸í•˜ëŠ” ìƒì–´ëŠ” ë°©ë¬¸ì„ ë¬´ì‹œí•˜ëŠ” í˜•íƒœë¡œ ì‘ì„±ì„ í•˜ì˜€ë‹¤.


ì´ ì½”ë“œì—ëŠ” ë‘ ê°€ì§€ ë¬¸ì œê°€ ì¡´ì¬í–ˆë‹¤. 


ì²« ë²ˆì§¸ëŠ” Queueì˜ ìë£Œêµ¬ì¡° íŠ¹ì„± ìƒ Queueë¥¼ ì „ë¶€ ë½‘ì•„ ë‹¤ë¥¸ íì— ì˜®ê²¨ ë‹´ì•„ì•¼ í•˜ê¸°ì— Queueê°€ ë‘ê°œ ì´ìƒ ì¡´ì¬ í•´ì•¼ í–ˆë‹¤. ì´ ë¶€ë¶„ì€ Vectorë¥¼ ì‚¬ìš©í•˜ì—¬ ìƒì–´ê°€ ì£½ì—ˆëŠ”ì§€ ìœ ë¬´ë¥¼ ì²´í¬í•˜ëŠ” ë°©ë²•ì´ ìˆì—ˆë‹¤.


ë‘ ë²ˆì§¸ëŠ” ìƒì–´ë¥¼ ì˜®ê¸°ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œ ì¼ì¼ì´ í•œ ì¹¸ì”© ì˜®ê²¨ì£¼ì—ˆê¸°ì— ì‹œê°„ì´ ë” ê±¸ë ¸ì„ ê²ƒì´ë‹¤. ìƒì–´ë¥¼ ì˜®ê¸°ëŠ” ë°©ë²•ì€ ìƒì–´ê°€ ì´ë™í•´ì•¼ í•˜ëŠ” ì†ë„ë¥¼ ë‹¤ì‹œ ì›ìœ„ì¹˜ë¡œ ëŒì•„ì˜¤ëŠ” íšŸìˆ˜(ì„¸ë¡œì˜ ê²½ìš° (R-1)*2 ë²ˆ, ê°€ë¡œì˜ ê²½ìš° (C-1)*2ë²ˆ)ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ ê°’ì— ëŒ€í•´, ê¸°ì¡´ (R,C)ì—ì„œ í•´ë‹¹ ë°©í–¥ìœ¼ë¡œ ì´ë™í–ˆì„ ë•Œ ë²”ìœ„ë¥¼ ì´ˆê³¼í•˜ëŠ” ì§€ ì•ˆ í•˜ëŠ” ì§€ë¥¼ ì²´í¬í•˜ì—¬ ì ì ˆíˆ ê±°ë¦¬ ì´ë™ì„ í•´ì£¼ì—ˆë‹¤ë©´ ì‹œê°„ì´ ë” ì¤„ì—ˆì„ ê²ƒê°™ë‹¤.


ë§ë¡œ ì ìœ¼ë©´ ì´í•´ê°€ ì˜ ì•ˆë˜ë‹ˆ ì˜ˆì œë¥¼ í•˜ë‚˜ ë“¤ê³  ì™”ë‹¤.


```c++
#include <iostream>

using namespace std;
int N,M, numOfShark;
int dy[4]={-1,1,0,0};
int dx[4]={0,0,1,-1};
typedef struct shark{
    int size;
    int dir;
    int speed;
}SHARK;
SHARK sharkMap[100][100];
void solve();
int main(void){
    //ì¹¸ì—ëŠ” ìƒì–´ê°€ ìµœëŒ€ í•œ ë§ˆë¦¬ ë“¤ì–´ìˆì„ ìˆ˜ ìˆë‹¤. ìƒì–´ëŠ” í¬ê¸°ì™€ ì†ë„ë¥¼ ê°€ì§€ê³  ìˆë‹¤
    //1,1 ì›ì 
    /*1.ë‚šì‹œì™•ì´ ì˜¤ë¥¸ìª½ìœ¼ë¡œ í•œ ì¹¸ ì´ë™í•œë‹¤.
      2.ë‚šì‹œì™•ì´ ìˆëŠ” ì—´ì— ìˆëŠ” ìƒì–´ ì¤‘ì—ì„œ ë•…ê³¼ ì œì¼ ê°€ê¹Œìš´ ìƒì–´ë¥¼ ì¡ëŠ”ë‹¤. ìƒì–´ë¥¼ ì¡ìœ¼ë©´ ê²©ìíŒì—ì„œ ì¡ì€ ìƒì–´ê°€ ì‚¬ë¼ì§„ë‹¤.
      3.ìƒì–´ê°€ ì´ë™í•œë‹¤.
    */

   ios::sync_with_stdio(false);
   cin.tie(NULL); cout.tie(NULL);
   cin>>N>>M>>numOfShark;

    for(int i=0,r,c,s,d,z; i<numOfShark;i++){
        cin>>r>>c>>s>>d>>z;
        sharkMap[r-1][c-1].speed=s;
        sharkMap[r-1][c-1].dir=d-1;
        sharkMap[r-1][c-1].size=z;
    }
    solve();
}
int getShark(int ix){
    for(int j=0;j<N;j++){
        if(sharkMap[j][ix].size>0){
            int size=sharkMap[j][ix].size;
            sharkMap[j][ix].size=0;
            sharkMap[j][ix].speed=0;
            sharkMap[j][ix].dir=0;
            return size;
        }
    }
    //ì—†ì„ ìˆ˜ ë„ ìˆìŒ
    return 0;
}
bool outOfRange(int y,int x){
    if(y<0||x<0||y>=N||x>=M) return true;
    return false;
}
void printSharK(){
    cout<<"LOCATION of SHARK\n";
    for(int i=0;i<N;i++){
        for(int s=0;s<M;s++){
            cout<<sharkMap[i][s].size<<" ";
        }
        cout<<"\n";
    }
}
int moveEachShark(int&y,int&x,int&dir,int speed){
    //ì•ˆì›€ì§ì„
    if(speed==0) return 1;
    if(dir<2){ //ìœ„ ì•„ë˜
        int divider=(N-1)*2;
        speed%=divider;
    }
    else{
        //ì¢Œ ìš°
        int divider=(M-1)*2;
        speed%=divider;
    }
    if(!outOfRange(y+(speed*dy[dir]),x+(speed*dx[dir]))){
        y+=(speed*dy[dir]);
        x+=(speed*dx[dir]);
        return 1;
    }

    for(int i=0;i<speed;i++){
        y+=dy[dir];
        x+=dx[dir];
        if(outOfRange(y,x)){
            if(dir%2==0) dir++;
            else dir--;
            //if(dir=2) dir
            y+=(2*dy[dir]);
            x+=(2*dx[dir]);
        }
    }
    if(outOfRange(y,x)) return -1;
    return 1;

}

void moveShark(){
    SHARK copySharkMap[100][100];
    //ì´ˆê¸°í™”
    for(int i=0;i<N;i++){
        for(int s=0;s<M;s++){
            copySharkMap[i][s].size=0;
            copySharkMap[i][s].speed=0;
            copySharkMap[i][s].dir=0;
        }
    }
    for(int i=0;i<N;i++){
        for(int s=0;s<M;s++){
            if(sharkMap[i][s].size>0){
                int y=i;
                int x=s;
                int dir=sharkMap[i][s].dir;
                int speed=sharkMap[i][s].speed;
                int size=sharkMap[i][s].size;
                int result=moveEachShark(y,x,dir,speed);
                if(result==-1){
                    cout<<y<<" "<<x<<" "<<dir<<" "<<speed<<" "<<size<<"\n";
                    cout<<"OUTOFRANGE\n"; 
                    return;}
                if(copySharkMap[y][x].size>0){
                    if(copySharkMap[y][x].size>size) continue;
                    
                    copySharkMap[y][x].size=size;
                    copySharkMap[y][x].dir=dir;
                    copySharkMap[y][x].speed=speed;
                }else{
                    copySharkMap[y][x].size=size;
                    copySharkMap[y][x].dir=dir;
                    copySharkMap[y][x].speed=speed;
                }
            }
        }
    }
    for(int i=0;i<N;i++){
        for(int s=0;s<M;s++){
            sharkMap[i][s]=copySharkMap[i][s];
        }
    }


}


void solve(){
    int score=0;
    for(int i=0;i<M;i++){
        score+=getShark(i);
        //cout<<score<<"\n";
        moveShark();
        //printSharK();
    }
    cout<<score<<"\n";


}
```


(ë‚´ê°€ ìƒê°í•˜ê¸°ì—” ì´ ì½”ë“œì—ì„œ ì¼ë°˜ ë°°ì—´ì„ ì‚¬ìš©í–ˆë‹¤ë©´ ë””ë²„ê¹…ì€ í¸í–ˆì„ ê²ƒ ê°™ì•˜ìœ¼ë‚˜ ë§¤ë²ˆ ìƒì–´ì˜ ìœ„ì¹˜ë¥¼ ì°¾ì„ ë•Œë§ˆë‹¤ Mapì „ì²´ë¥¼ ê³„ì† íƒìƒ‰í•´ì•¼ ë˜ê¸°ì— ì‹œê°„ì€ ì¢€ ë” ëŠ˜ì–´ë‚¬ì„ ê²ƒì´ë‹¤.)


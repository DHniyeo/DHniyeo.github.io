---
layout: post
date: 2024-04-05
title: "[BOJ-Code] 19237 - ì–´ë¥¸ ìƒì–´"
tags: [Samsung-Coding, Algorithm-êµ¬í˜„, ]
categories: [Samsungê¸°ì¶œ, CodingTest, ]
---

[ë¬¸ì œ ë§í¬](https://www.acmicpc.net/problem/19237)


> ğŸ’¡ êµ¬í˜„/ì‹œë®¬ë ˆì´ì…˜


> **Memory   2592KB                                   Time   160ms                               Code Length   5640B**


```c++
// ìƒì–´ëŠ” ê³ ìœ  ë²ˆí˜¸ê°€ ìˆë”°.
// 1ë²ˆ ìƒì–´ê°€ ëŒ€ë¹µ, ë‹¤ì«“ì•„ëƒ„
// 1. ìì‹ ì˜ ìœ„ì¹˜ì—ì„œ ëƒ„ìƒˆ ë¿Œë¦¬ê¸°
// 2. ìƒì–´ì˜ ë™ì‹œ ì´ë™ ìì‹ ì˜ ëƒ„ìƒˆë¥¼ í•´ë‹¹ì¹¸ì— ë¿Œë¦¼
// 3. ëƒ„ìƒˆëŠ” ìƒì–´ê°€ kë²ˆ ì´ë™í•˜ë©´ ì‚¬ë¼ì§
// ì´ë™ ë°©í–¥ ê²°ì •í•  ë•ŒëŠ”, ì¸ì ‘í•œ ì¹¸ ì¤‘ì— ì•„ë¬´ëƒ„ìƒˆê°€ ì—†ëŠ” ì¹¸ì˜ ë°©í–¥ìœ¼ë¡œ ì¡ê³ , ê·¸ëŸ°ì¹¸ì´ ì—†ìœ¼ë©´ ìì‹ ì˜ ëƒ„ìƒˆê°€ ìˆëŠ” ì¹¸ì˜ ë°©í–¥ìœ¼ë¡œ ì¡ìŒ.
// ìš°ì„ ìˆœìœ„ëŠ” ìƒì–´ë§ˆë‹¤ ë‹¤ë¥¼ ìˆ˜ ìˆê³ , ê°™ì€ ìƒì–´ë¼ë„ í˜„ì¬ ìƒì–´ê°€ ë³´ê³ ìˆëŠ” ë°©í–¥ì— ë”°ë¼ ë‹¤ë¥¼ ìˆ˜ ë„ ìˆë‹¤.
// ìš°ì„ ìˆœìœ„ëŠ” ì£¼ì–´ì§.

#include <iostream>
#include <vector>
#include <cstring>

using namespace std;
int N, M, K;
struct info_map {
	int num, dir;
};
struct info_smell {
	int num;
	int cnt; // ë¨¸ë¬´ë¥¸ íšŸìˆ˜
};
info_map shark_map[20][20] = {0};
vector<info_smell> smell_map[20][20];
int priority_map[401][4][4];
const int dy[] = {-1, 1, 0,0};
const int dx[] = {0, 0, -1, 1}; // ìœ„(0), ì•„ë˜(1), ì™¼ìª½(2), ì˜¤ë¥¸ìª½(3)

void init() {
	
	cin >> N >> M >> K; // ë§µí¬ê¸°, ìƒì–´ìˆ˜, ëƒ„ìƒˆ ì‚¬ë¼ì§€ëŠ” ì‹œê°„
	for (int i = 0; i < N; i++) { // ìƒì–´ ë²ˆí˜¸ ë°°ì¹˜ ë§µì— ë°˜ì˜
		for (int j = 0; j < N; j++) {
			cin >> shark_map[i][j].num;
		}
	}
	for (int k = 1; k <= M; k++) { // ìƒì–´ ë°©í–¥ ë§µì— ë°˜ì˜
		int tmp_dir;
		cin >> tmp_dir;
		for (int i = 0; i < N; i++) { // 
			for (int j = 0; j < N; j++) {
				if (shark_map[i][j].num == k) {
					shark_map[i][j].dir = tmp_dir - 1; // 0~3
				}
			}
		}
	}
	
	for (int i = 1; i <= M; i++) { // ìš°ì„ ìˆœìœ„
		for (int j = 0; j < 4; j++) {
			for (int k = 0; k < 4; k++) {
				int dir;
				cin >> dir;
				priority_map[i][j][k] = dir -1;
			}
		}
	}
}

void spreadSmell() {
	for (int i = 0; i < N; i++) {
		for (int j = 0; j < N; j++) {
			if (shark_map[i][j].num != 0) {
				smell_map[i][j].push_back({ shark_map[i][j].num , 0 });
			}
		}
	}
}

void moveshark() {
	info_map new_map[20][20]; // ë™ì‹œ ì§„í–‰ í•˜ë¯€ë¡œ í˜„ì¬ë§µì„ ë³´ê³  ìƒˆë¡œìš´ ë§µì„ ìƒì„±í•¨.
	memset(new_map, 0, sizeof(new_map));
	// ìƒì–´ì˜ í˜„ì¬ ë°”ë¼ë³´ê³  ìˆëŠ” ë°©í–¥ì— ë”°ë¼ ë‹¤ìŒ ë°©í–¥ì˜ ìˆœì„œê°€ ê²°ì •ë¨.
	// ì´ë™ ë°©í–¥ ê²°ì •í•  ë•ŒëŠ”, ì¸ì ‘í•œ ì¹¸ ì¤‘ì— ì•„ë¬´ëƒ„ìƒˆê°€ ì—†ëŠ” ì¹¸ì˜ ë°©í–¥ìœ¼ë¡œ ì¡ê³ , ê·¸ëŸ°ì¹¸ì´ ì—†ìœ¼ë©´ ìì‹ ì˜ ëƒ„ìƒˆê°€ ìˆëŠ” ì¹¸ì˜ ë°©í–¥ìœ¼ë¡œ ì¡ìŒ.
	// í•´ë‹¹ ë°©í–¥ì— ìƒì–´ê°€ ìˆì„ ë•Œ ìƒì–´ ë²ˆí˜¸ê°€ ë” ì‘ë‹¤ë©´ ë®ì–´ì”Œìš°ê¸°
	for (int i = 0; i < N; i++) {
		for (int j = 0; j < N; j++) {
			if (shark_map[i][j].num != 0) {
				info_map shark = shark_map[i][j];
				// ì•„ë¬´ ëƒ„ìƒˆ ì—†ëŠ” ì¹¸ì˜ ë°©í–¥ ì°¾ê¸°
				bool flag = false;
				for (int k = 0; k < 4; k++) {
					int ny = i + dy[priority_map[shark.num][shark.dir][k]];
					int nx = j + dx[priority_map[shark.num][shark.dir][k]];
					if (ny >= N || nx >= N || ny < 0 || nx < 0) continue;
					if (smell_map[ny][nx].size() != 0) continue;
					flag = true;
					// ì˜®ê²¨ì§„ ìœ„ì¹˜ë¥¼ ìƒˆë¡œìš´ ë§µì—ì„œ ê°±ì‹ 
					shark.dir = priority_map[shark.num][shark.dir][k]; // ë°©í–¥ ê°±ì‹ 
					if (new_map[ny][nx].num == 0 || new_map[ny][nx].num > shark.num) { // ë¹ˆì¹¸ì´ê±°ë‚˜ ê¸°ì¡´ì— ìˆë˜ ë†ˆ ë³´ë‹¤ ìˆ˜ê°€ ì‘ì•„ì•¼í•¨
						new_map[ny][nx] = shark; // ë§µì—ì„œ ê°±ì‹ 
					}
					break;
				}
				if (!flag) {
					for (int k = 0; k < 4; k++) {
						int ny = i + dy[priority_map[shark.num][shark.dir][k]];
						int nx = j + dx[priority_map[shark.num][shark.dir][k]];
						if (ny >= N || nx >= N || ny < 0 || nx < 0) continue;
						bool findsmell = false;
						for (int t = 0; t < smell_map[ny][nx].size(); t++) {
							if (smell_map[ny][nx][t].num == shark.num) {
								findsmell = true;
								break;
							}
						}
						if (!findsmell) continue;

						// ì˜®ê²¨ì§„ ìœ„ì¹˜ë¥¼ ìƒˆë¡œìš´ ë§µì—ì„œ ê°±ì‹ 
						shark.dir = priority_map[shark.num][shark.dir][k]; // ë°©í–¥ ê°±ì‹ 
						if (new_map[ny][nx].num == 0 || new_map[ny][nx].num > shark.num) { // ë¹ˆì¹¸ì´ê±°ë‚˜ ê¸°ì¡´ì— ìˆë˜ ë†ˆ ë³´ë‹¤ ìˆ˜ê°€ ì‘ì•„ì•¼í•¨
							new_map[ny][nx] = shark; // ë§µì—ì„œ ê°±ì‹ 
						}
						break;
					}
				}

			}
		}
	}
	memcpy(shark_map, new_map, sizeof(shark_map));
}
void removeSmell() {
	for (int i = 0; i < N; i++) {
		for (int j = 0; j < N; j++) {
			vector<info_smell> nextSmell;
			int size = smell_map[i][j].size();
			for (int k = 0; k < size; k++) {
				if (smell_map[i][j][k].cnt < K) { // Kë³´ë‹¤ ì‘ì„ ë•Œë§Œ ë‹¤ì‹œ ì¶”ê°€í•´ì¤Œ.
					nextSmell.push_back(smell_map[i][j][k]);
				}
			}
			smell_map[i][j] = nextSmell;
		}
	}
}
void plusSmellTime() {
	// ëƒ„ìƒˆ ì‹œê°„ ì¦ê°€
	for (int i = 0; i < N; i++) {
		for (int j = 0; j < N; j++) {
			int size = smell_map[i][j].size();
			for (int k = 0; k < size; k++) {
				smell_map[i][j][k].cnt += 1;
			}
		}
	}
}


bool checkmap() {
	int sum = 0;
	for (int i = 0; i < N; i++) {
		for (int j = 0; j < N; j++) {
			if (shark_map[i][j].num != 0) {
				sum += shark_map[i][j].num;
			}
		}
	}
	if (sum == 1) return true;
	else return false;
}
void printmap() {
	cout << endl;
	for (int i = 0; i < N; i++) {
		for (int j = 0; j < N; j++) {
			cout << shark_map[i][j].num << " ";
		}
		cout << endl;
	}
}
int main() {
	init();
	int time = 0;

	while (1) {
		// 1ë²ˆ ìƒì–´ë§Œ ê²©ìì— ë‚¨ì•„ ìˆë‹¤ë©´ break;
		if (checkmap()) {
			break;
		}
		// timeì´  1000ì„ ë„˜ëŠ”ë‹¤ë©´ break;
		if (time >= 1000) {
			time = -1;
			break;
		}
		// 1. ìì‹ ì˜ ìœ„ì¹˜ì—ì„œ ëƒ„ìƒˆ ë¿Œë¦¬ê¸°
		spreadSmell();
		
		// 2. ìƒì–´ì˜ ë™ì‹œ ì´ë™
		moveshark();
		
		// 3. ëƒ„ìƒˆ ì‹œê°„ ì¦ê°€ 
		plusSmellTime();
		
		// 4. ëƒ„ìƒˆ kë²ˆ ì´ë™í•˜ë©´ ì‚¬ë¼ì§
		removeSmell();

		time++;

		//printmap();
	}
	cout << time;

}
```


ì´ ì½”ë“œëŠ” ìƒì–´ë“¤ì´ ê²©ì ì•ˆì—ì„œ ì›€ì§ì´ëŠ” ì‹œë®¬ë ˆì´ì…˜ì„ ìˆ˜í–‰í•˜ëŠ” í”„ë¡œê·¸ë¨ì´ë‹¤.

ë¨¼ì € ì´ˆê¸°í™”(init) í•¨ìˆ˜ì—ì„œ ê²©ìì˜ í¬ê¸°(N), ìƒì–´ì˜ ìˆ˜(M), ëƒ„ìƒˆê°€ ì‚¬ë¼ì§€ëŠ” ì‹œê°„(K)ì„ ì…ë ¥ë°›ê³ , ìƒì–´ë“¤ì˜ ìœ„ì¹˜ì™€ ë°©í–¥, ê° ìƒì–´ì˜ ì´ë™ ìš°ì„ ìˆœìœ„ë¥¼ ì„¤ì •í•œë‹¤.

spreadSmell í•¨ìˆ˜ì—ì„œëŠ” ê° ìƒì–´ê°€ ìˆëŠ” ìœ„ì¹˜ì— ëƒ„ìƒˆë¥¼ ë¿Œë¦°ë‹¤.

moveshark í•¨ìˆ˜ì—ì„œëŠ” ê° ìƒì–´ë¥¼ ë™ì‹œì— ì´ë™ì‹œí‚¤ëŠ”ë°, ìƒì–´ëŠ” ì¸ì ‘í•œ ì¹¸ ì¤‘ì— ëƒ„ìƒˆê°€ ì—†ëŠ” ì¹¸ì˜ ë°©í–¥ìœ¼ë¡œ ì´ë™í•˜ë©°, ë§Œì•½ ê·¸ëŸ° ì¹¸ì´ ì—†ë‹¤ë©´ ìì‹ ì˜ ëƒ„ìƒˆê°€ ìˆëŠ” ì¹¸ì˜ ë°©í–¥ìœ¼ë¡œ ì´ë™í•œë‹¤. ìƒì–´ê°€ ì´ë™í•œ í›„ì—ëŠ” ìƒˆë¡œìš´ ë§µì— ìƒì–´ì˜ ìœ„ì¹˜ë¥¼ ê°±ì‹ í•œë‹¤.

removeSmell í•¨ìˆ˜ì—ì„œëŠ” ëƒ„ìƒˆê°€ ì‚¬ë¼ì§€ëŠ” ì‹œê°„ì´ ì§€ë‚œ ëƒ„ìƒˆë¥¼ ì œê±°í•œë‹¤.

plusSmellTime í•¨ìˆ˜ì—ì„œëŠ” ë‚¨ì•„ìˆëŠ” ëƒ„ìƒˆë“¤ì˜ ì‹œê°„ì„ ì¦ê°€ì‹œí‚¨ë‹¤.

checkmap í•¨ìˆ˜ì—ì„œëŠ” 1ë²ˆ ìƒì–´ë§Œ ê²©ìì— ë‚¨ì•„ìˆëŠ”ì§€ í™•ì¸í•˜ì—¬ ê²Œì„ì„ ì¢…ë£Œí• ì§€ ì—¬ë¶€ë¥¼ ê²°ì •í•œë‹¤.

main í•¨ìˆ˜ì—ì„œëŠ” ìœ„ì˜ í•¨ìˆ˜ë“¤ì„ ì´ìš©í•˜ì—¬ ì‹œë®¬ë ˆì´ì…˜ì„ ë°˜ë³µí•˜ê³ , 1ë²ˆ ìƒì–´ë§Œ ë‚¨ì•„ìˆê±°ë‚˜ ì‹œê°„ì´ 1000ì„ ë„˜ìœ¼ë©´ ì¢…ë£Œí•œë‹¤. ì¢…ë£Œ ì‹œê°„ì„ ì¶œë ¥í•œë‹¤.


---


ì‹œê°„ì´ 1000ì´ìƒì´ë©´ ì¢…ë£Œí•˜ëŠ” ê²ƒ ë•Œë¬¸ì—â€¦ ì§€ë¬¸ ì˜¤í•´ë¥¼ í–ˆë‹¤. 3ì‹œê°„ë§Œ ë²„ë ¸ë‹¤.


---
layout: post
date: 2024-04-10
title: "[BOJ-Code] 21609 - ìƒì–´ ì¤‘í•™êµ"
tags: [Algorithm-êµ¬í˜„, Algorithm-DFS/BFS, Samsung-Coding, ]
categories: [CodingTest, Samsungê¸°ì¶œ, ]
---


[ë¬¸ì œ ë§í¬](https://www.acmicpc.net/problem/21609)


> ğŸ’¡ ë„ˆë¹„ ìš°ì„  íƒìƒ‰/ê·¸ë˜í”„ ì´ë¡ /ê·¸ë˜í”„ íƒìƒ‰/êµ¬í˜„/ì‹œë®¬ë ˆì´ì…˜


> **Memory   2032KB                                   Time   0ms                               Code Length   5510B**



{% raw %}
```c++
//1. í¬ê¸°ê°€ ê°€ì¥ í° ë¸”ë¡ ê·¸ë£¹ì„ ì°¾ëŠ”ë‹¤.ë¬´ì§€ê°œ ë¸”ë¡ì˜ ìˆ˜ê°€ ê°€ì¥ ë§ì€ ë¸”ë¡, ê¸°ì¤€ ë¸”ë¡ì˜ í–‰ì´ ê°€ì¥ í°ê²ƒ, ì—´ì´ ê°€ì¥í°ê²ƒ
//2. ë¸”ë¡ ëª¨ë‘ ì œê±° Bì œê³± ì ìˆ˜ë¥¼ ì–»ìŒ.
//3. ê²©ìì— ì¤‘ë ¥ ì‘ìš©(-1 ë¸”ë¡ ë¹¼ê³  ë‹¤ë‚´ë¦¼)
//4. ê²©ì 90ë„ ë°˜ì‹œê³„ ë°©í–¥ìœ¼ë¡œ íšŒì „.
//4. ê²©ìì— ì¤‘ë ¥ì‘ìš©(-1 ë¸”ë¡ ë¹¼ê³  ë‹¤ë‚´ë¦¼)
#include <iostream>
#include <cstring>
#include <queue>
#include <math.h>
#include<algorithm>
#include <vector>

using namespace std;

int N, M;
int color_MAP[20][20]; // -1 : ê²€ì€ ë¸”ë¡ 0: ë¬´ì§€ê°œ ë¸”ë¡ // -2 : ë¹ˆê³µê°„
int score = 0;
int dy[] = { -1,1,0,0 };
int dx[] = { 0,0,-1,1 };

void init() {
	cin >> N >> M;
	score = 0;
	for (int i = 0; i < N; i++) {
		for (int j = 0; j < N; j++) {
			cin >> color_MAP[i][j];
		}
	}
}
struct loc {
	int y, x;
};
struct info {
	int cnt, rainbowcnt;
};
struct vector_info {
	int y, x, rainbowcnt;
};
bool cmp(vector_info first, vector_info second) {
	if (first.rainbowcnt > second.rainbowcnt) {
		return true;
	}
	else if (first.rainbowcnt == second.rainbowcnt) {
		if (first.y > second.y) {
			return true;
		}
		else if (first.y == second.y) {
			return first.x > second.x;
		}
	}
	return false;
}

int color_visited[20][20] = { 0 };
info bfs(int y, int x, int color) {
	int visited[20][20] = { 0 };
	info result = { 1,0};
	queue<loc> q;
	q.push({ y,x });
	visited[y][x] = 1;
	while (!q.empty()) {
		loc now = q.front(); q.pop();

		for (int i = 0; i < 4; i++) {
			int ny = now.y + dy[i];
			int nx = now.x + dx[i];
			if (ny >= N || nx >= N || ny < 0 || nx < 0) continue;
			if (color_MAP[ny][nx] == -1 || color_MAP[ny][nx] == -2) continue;
			if (color_MAP[ny][nx] == color || color_MAP[ny][nx] == 0) { // ë¬´ì§€ê°œ ë¸”ëŸ­ì´ë‚˜ ê¸°ì¤€ ë¸”ëŸ­ê³¼ ê°™ì€ìƒ‰ìƒì¼ê²½ìš°ì—ë§Œ
				if (visited[ny][nx] == 1) continue;
				color_visited[ny][nx] = 1;
				visited[ny][nx] = 1;
				result.cnt++;
				if (color_MAP[ny][nx] == 0) result.rainbowcnt++;
				q.push({ ny,nx });
			}
		}
	}
	return result;
}
void deleteBlock(int y, int x, int color) { // ê¸°ì¤€ ë¸”ëŸ­ì˜ ìœ„ì¹˜ì—ì„œ ë‹¤ì‹œí•œë²ˆ ëŒë©´ì„œ ë§µìµœì‹ í™”
	// ë°©ë¬¸í•œ ê³³ì€ ì´ë¯¸ -2ì¼í…Œë‹ˆê¹ visited ë°°ì—´ì´ í•„ìš”ê°€ ì—†ìŒ.
	queue<loc> q;
	q.push({ y,x });
	color_MAP[y][x] = -2; // ë¹ˆê³µê°„ìœ¼ë¡œ ë§Œë“¤ì–´ë²„ë¦¼.

	while (!q.empty()) {
		loc now = q.front(); q.pop();

		for (int i = 0; i < 4; i++) {
			int ny = now.y + dy[i];
			int nx = now.x + dx[i];
			if (ny >= N || nx >= N || ny < 0 || nx < 0) continue;
			if (color_MAP[ny][nx] == -1 || color_MAP[ny][nx] == -2) continue;
			if (color_MAP[ny][nx] == color || color_MAP[ny][nx] == 0) { // ë¬´ì§€ê°œ ë¸”ëŸ­ì´ë‚˜ ê¸°ì¤€ ë¸”ëŸ­ê³¼ ê°™ì€ìƒ‰ìƒì¼ê²½ìš°ì—ë§Œ
				color_MAP[ny][nx] = -2; // ë¹ˆê³µê°„ìœ¼ë¡œ ë§Œë“¤ì–´ë²„ë¦¼.
				q.push({ ny,nx });
			}
		}

	}
}
bool findBig() {
	memset(color_visited, 0, sizeof(color_visited));
	//1. í¬ê¸°ê°€ ê°€ì¥ í° ë¸”ë¡ ê·¸ë£¹ì„ ì°¾ëŠ”ë‹¤.ë¬´ì§€ê°œ ë¸”ë¡ì˜ ìˆ˜ê°€ ê°€ì¥ ë§ì€ ë¸”ë¡, ê¸°ì¤€ ë¸”ë¡ì˜ í–‰ì´ ê°€ì¥ í°ê²ƒ, ì—´ì´ ê°€ì¥í°ê²ƒ
	int flag = false;
	int maxcnt = 0; // ë¸”ë¡ ê·¸ë£¹ì€ cntê°€ ë‘ê°œ ì´ìƒì´ì–´ì•¼í•¨.
	vector<vector_info> vc;

	for (int i = 0; i < N; i++) {
		for (int j = 0; j < N; j++) {
			if (color_MAP[i][j] > 0) { // ì¼ë°˜ ë¸”ë¡ì—ì„œ ë“¤ì–´ê°€ì•¼í•¨.
				if (color_visited[i][j] == 1) continue; // ì´ë¯¸ ë°©ë¬¸í•œ ìƒ‰ê¹”ë¸”ë¡ì€ ì œì™¸
				info now = bfs(i, j, color_MAP[i][j]);
				if (maxcnt < now.cnt && now.cnt > 1) {
					vc.clear();
					maxcnt = now.cnt;
					flag = true;
					vc.push_back({ i,j,now.rainbowcnt });
				}
				else if(maxcnt == now.cnt && now.cnt > 1){ 
					vc.push_back({ i,j,now.rainbowcnt });
				}
			}
		}
	}
	if (!flag) return flag;
	sort(vc.begin(), vc.end(), cmp);
	
	//2. ë¸”ë¡ ëª¨ë‘ ì œê±° Bì œê³± ì ìˆ˜ë¥¼ ì–»ìŒ.
	loc centerBlock = { vc[0].y, vc[0].x };
	deleteBlock(centerBlock.y, centerBlock.x, color_MAP[centerBlock.y][centerBlock.x]);
	score = score + maxcnt * maxcnt;
	return flag;
}
void Gravity() {
	for (int i = N - 1; i >= 0; i--) { // ë§¨ ë°‘ì—ì„œë¶€í„° ë‚´ë¦¼
		for (int j = 0; j < N; j++) {
			if (color_MAP[i][j] == -1 || color_MAP[i][j] == -2) continue; // ê²€ì€ ë¸”ë¡ê³¼ ë¹ˆê³µê°„ì€ ì›€ì§ì´ì§€ ì•ŠìŒ.
			int nowy = i;
			while (1) {
				int ny = nowy + 1;
				if (ny >= N)break; // ë²”ìœ„ ì•ˆì—ì„œë§Œ ì´ë™
				if (color_MAP[ny][j] != -2) break; // ë¹ˆê³µê°„ìœ¼ë¡œë§Œ ì´ë™
				color_MAP[ny][j] = color_MAP[nowy][j]; // ì´ë™
				color_MAP[nowy][j] = -2; // í˜„ì¬ì¹¸ ë¹„ìš°ê¸°
				nowy = ny; // ì¢Œí‘œ ì´ë™
			}
		}
	}
}

void RotateMAP() {
	int tmp[20][20] = { 0 };
	for (int i = 0; i < N; i++) {
		for (int j = 0; j < N; j++) {
			tmp[i][j] = color_MAP[j][N - 1 - i];
		}
	}
	memcpy(color_MAP, tmp, sizeof(color_MAP));
}
void printMAP() {

	cout << endl;
	for (int i = 0; i < N; i++) {
		for (int j = 0; j < N; j++) {
			cout << color_MAP[i][j] << " ";
		}
		cout << endl;
	}

}
int main() {
	init();
	while (1) {
		//1. í¬ê¸°ê°€ ê°€ì¥ í° ë¸”ë¡ ê·¸ë£¹ì„ ì°¾ëŠ”ë‹¤.ë¬´ì§€ê°œ ë¸”ë¡ì˜ ìˆ˜ê°€ ê°€ì¥ ë§ì€ ë¸”ë¡, ê¸°ì¤€ ë¸”ë¡ì˜ í–‰ì´ ê°€ì¥ í°ê²ƒ, ì—´ì´ ê°€ì¥í°ê²ƒ
		//2. ë¸”ë¡ ëª¨ë‘ ì œê±° Bì œê³± ì ìˆ˜ë¥¼ ì–»ìŒ.
		if (!findBig()) break;
		//printMAP();
		//cout << "nowscore : "<< score << endl;
		//3. ê²©ìì— ì¤‘ë ¥ ì‘ìš©(-1 ë¸”ë¡ ë¹¼ê³  ë‹¤ë‚´ë¦¼)
		Gravity();
		//printMAP();
		//4. ê²©ì 90ë„ ë°˜ì‹œê³„ ë°©í–¥ìœ¼ë¡œ íšŒì „.
		RotateMAP();
		//printMAP();
		//5. ê²©ìì— ì¤‘ë ¥ì‘ìš©(-1 ë¸”ë¡ ë¹¼ê³  ë‹¤ë‚´ë¦¼)
		Gravity();
		//printMAP();
	}

	cout << score << endl;
}
```
{% endraw %}



ì´ ì½”ë“œëŠ” ì£¼ì–´ì§„ ê²©ìì—ì„œ ê°€ì¥ í° ë¸”ë¡ ê·¸ë£¹ì„ ì°¾ì•„ì„œ ì œê±°í•˜ëŠ” ê²Œì„ì„ êµ¬í˜„í•œ ê²ƒì´ë‹¤.

ë¨¼ì € ê°€ì¥ í° ë¸”ë¡ ê·¸ë£¹ì„ ì°¾ëŠ”ë‹¤. ì´ë•Œ, ë¬´ì§€ê°œ ë¸”ë¡ì˜ ìˆ˜ê°€ ê°€ì¥ ë§ì€ ë¸”ë¡ì„ ì„ íƒí•˜ê³ , ë§Œì•½ ë¬´ì§€ê°œ ë¸”ë¡ì˜ ìˆ˜ê°€ ê°™ë‹¤ë©´ ê¸°ì¤€ ë¸”ë¡ì˜ í–‰ì´ ê°€ì¥ í° ê²ƒ, ì—´ì´ ê°€ì¥ í° ê²ƒì„ ì„ íƒí•œë‹¤.

í•´ë‹¹ ë¸”ë¡ ê·¸ë£¹ì„ ëª¨ë‘ ì œê±°í•˜ë©´ì„œ Bì˜ ì œê³±ë§Œí¼ ì ìˆ˜ë¥¼ íšë“í•œë‹¤.

ê·¸ í›„, ê²©ìì— ì¤‘ë ¥ì´ ì‘ìš©í•˜ì—¬ ë¸”ë¡ë“¤ì„ ì•„ë˜ë¡œ ë‚´ë¦°ë‹¤. (ê²©ìì˜ ë¹ˆ ê³µê°„ì„ ì±„ìš°ê¸° ìœ„í•´)

ê²©ìë¥¼ 90ë„ ë°˜ì‹œê³„ ë°©í–¥ìœ¼ë¡œ íšŒì „ì‹œí‚¨ë‹¤.

ë‹¤ì‹œ ì¤‘ë ¥ì´ ì‘ìš©í•˜ì—¬ ë¸”ë¡ë“¤ì„ ì•„ë˜ë¡œ ë‚´ë¦°ë‹¤.

ì´ ê³¼ì •ì„ ë°˜ë³µí•˜ë©´ì„œ ì ìˆ˜ë¥¼ ëˆ„ì í•˜ê³ , ëª¨ë“  ê°€ëŠ¥í•œ ë¸”ë¡ ê·¸ë£¹ì„ ì œê±°í•œ í›„ì— ìµœì¢…ì ìœ¼ë¡œ ì–»ì€ ì ìˆ˜ë¥¼ ì¶œë ¥í•œë‹¤.


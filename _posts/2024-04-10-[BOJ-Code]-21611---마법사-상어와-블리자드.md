---
layout: post
date: 2024-04-10
title: "[BOJ-Code] 21611 - ë§ˆë²•ì‚¬ ìƒì–´ì™€ ë¸”ë¦¬ìë“œ"
tags: [Algorithm-êµ¬í˜„, Algorithm-DFS/BFS, ]
categories: [Samsungê¸°ì¶œ, CodingTest, ]
---

[ë¬¸ì œ ë§í¬](https://www.acmicpc.net/problem/21611)


> ğŸ’¡ êµ¬í˜„/ì‹œë®¬ë ˆì´ì…˜


> **Memory   2044KB                                   Time   8ms                               Code Length   4848B**


```c++
//	ì…ë ¥: N, M
//	N*N ë§µ
//	Mê°œì˜ ì¤„ì— dì™€ s ì£¼ì–´ì§
//	ì¶œë ¥ : 1xí­ë°œí•œ 1ë²ˆêµ¬ìŠ¬ + 2xí­ë°œí•œ 2ë²ˆêµ¬ìŠ¬ ê°œìˆ˜ + 3x í­ë°œí•œ 3ë²ˆêµ¬ìŠ¬ ê°œìˆ˜

#include<iostream>
#include<cstring>
using namespace std;

int N, M;
int ball_map[49][49];
int straight[2500]; // ì¼ì ë°°ì—´
struct info {
	int d, s;
};
struct loc {
	int y, x;
};
info todo[100];
int ballcnt[4]; // 1,2,3ë§Œì”€
int dy[] = { -1,1,0,0 };
int dx[] = { 0,0,-1,1 };

int spin_dy[] = { 0,1,0,-1 }; // ì™¼ ì•„ë˜ ì˜¤ë¥¸ ìœ„
int spin_dx[] = { -1,0,1,0 };

void init() {
	memset(ballcnt, 0, sizeof(ballcnt));
	cin >> N >> M;
	for (int i = 0; i < N; i++) {
		for (int j = 0; j < N; j++) {
			cin >> ball_map[i][j];
		}
	}
	for (int i = 0; i < M; i++) {
		int d, s;
		cin >> d >> s;
		d--;
		todo[i] = { d,s };
	}
}
void cnt_ball_in_straight(int idx) {
	if (straight[idx] == 1) {
		ballcnt[1]++;
	}
	else if (straight[idx] == 2) {
		ballcnt[2]++;
	}
	else if (straight[idx] == 3) {
		ballcnt[3]++;
	}
}
void blizard(int d, int s) {
	loc shark = { N / 2, N / 2 };
	for (int i = 1; i <= s; i++) {
		int ny = shark.y + dy[d] * i;
		int nx = shark.x + dx[d] * i;
		ball_map[ny][nx] = 0;
	}
}
void pushstraight() { // ë°°ì—´ ëŒ•ê¹€
	for (int i = 1; i < N*N; i++) {
		if (straight[i] != 0) {
			int nowi = i;
			while (1) {
				int ni = nowi - 1;
				if (ni < 1) break;
				if (straight[ni] != 0) break;
				straight[ni] = straight[nowi];
				straight[nowi] = 0;
				nowi = ni;
			}
		}
	}
}
void makestaright() {
	loc now = { N / 2, N / 2 };
	int adder = 1;
	int dir = 0;

	int times = 0;
	int limit_times = 1;
	int cnt = 0;

	int num = 0;
	while (1) {
		int ny = now.y + spin_dy[dir];
		int nx = now.x + spin_dx[dir];
		if (ny == 0 && nx == -1) break;

		num++;
		times++;

		straight[num] = ball_map[ny][nx];

		if (times == limit_times) { // ì •í•´ì§„ ê¸¸ì´ ë§Œí¼ ì›€ì§ì´ê³ 
			cnt++;
			times = 0;
			dir = (dir + 1) % 4;
		}
		if (cnt == 2) { // 2ë²ˆ ì›€ì§ì˜€ë‹¤ë©´ limit + 1
			cnt = 0;
			limit_times += 1;
		}
		now.y = ny;
		now.x = nx;
	}
	pushstraight();
}

bool breakstragiht() {
	int num = 0;
	int cnt = 1;
	int flag = false;
	int lastpoint = 0;
	for (int i = 1; i < N*N; i++) {
		lastpoint = i;
		if (straight[i] == 0)break;
		if (num != straight[i]) {
			if (cnt >= 4) {
				flag = true;
				for (int j = i - cnt; j < i; j++) {
					cnt_ball_in_straight(j);
					straight[j] = 0;
				}

			}
			num = straight[i];
			cnt = 1; // cnt ì´ˆê¸°í™”
		}
		else {
			cnt++;
		}
	}
	if (cnt >= 4) { // ë§ˆì§€ë§‰ì— í•œë²ˆ ë”í•´ì¤˜ì•¼í•¨
		flag = true;
		for (int j = lastpoint - cnt; j < lastpoint; j++) {
			cnt_ball_in_straight(j);
			straight[j] = 0;
		}
	}
	pushstraight();

	return flag;
}
void makenewstraight() {
	int newstraight[2500] = { 0 };
	int newi = 1;

	int num = straight[1];
	int cnt = 0;
	int lastpoint = 0;
	for (int i = 1; i < N*N; i++) {
		if (straight[i] == 0)break;
		if (newi >= N * N) break;
		if (num != straight[i]) {
			newstraight[newi++] = cnt;
			newstraight[newi++] = num;
			num = straight[i];
			cnt = 1; // cnt ì´ˆê¸°í™”
		}
		else {
			cnt++;
		}
	}
	newstraight[newi++] = cnt;
	newstraight[newi++] = num;

	memset(straight, 0, sizeof(straight));
	for (int i = 1; i < N*N; i++) {
		straight[i] = newstraight[i];
	}
}
void makeball_map() {
	loc now = { N / 2, N / 2 };
	int adder = 1;
	int dir = 0;

	int times = 0;
	int limit_times = 1;
	int cnt = 0;

	int num = 0;
	while (1) {
		int ny = now.y + spin_dy[dir];
		int nx = now.x + spin_dx[dir];
		if (ny == 0 && nx == -1) break;

		num++;
		times++;

		ball_map[ny][nx] = straight[num];

		if (times == limit_times) { // ì •í•´ì§„ ê¸¸ì´ ë§Œí¼ ì›€ì§ì´ê³ 
			cnt++;
			times = 0;
			dir = (dir + 1) % 4;
		}
		if (cnt == 2) { // 2ë²ˆ ì›€ì§ì˜€ë‹¤ë©´ limit + 1
			cnt = 0;
			limit_times += 1;
		}
		now.y = ny;
		now.x = nx;
	}
}




int getscore() {
	//ì¶œë ¥: 1xí­ë°œí•œ 1ë²ˆêµ¬ìŠ¬ + 2xí­ë°œí•œ 2ë²ˆêµ¬ìŠ¬ ê°œìˆ˜ + 3x í­ë°œí•œ 3ë²ˆêµ¬ìŠ¬ ê°œìˆ˜
	int sum = 0;
	sum = ballcnt[1] + ballcnt[2] * 2 + ballcnt[3] * 3;
	return sum;
}
void printstraight() {
	cout << endl;
	for (int i = 0; i < N*N; i++) {
		cout << straight[i] << " ";
	}
}
void printballmap() {
	cout << endl;
	for (int i = 0; i < N; i++) {
		for (int j = 0; j < N; j++) {
			cout << ball_map[i][j] << " ";
		}
		cout << endl;
	}
}
int main() {
	init();
	for (int i = 0; i < M; i++) {
		info now = todo[i];
		//1. dë°©í–¥ìœ¼ë¡œ ê±°ë¦¬ s ì´í•˜ì¸ ëª¨ë“ ì¹¸ì— ì–¼ìŒíŒŒí¸ ë˜ì§€ê¸°
		blizard(now.d, now.s);
		//printballmap();
		// ë§µ ì¼ì ë°°ì—´ë¡œ ì¬êµ¬ì„±.
		makestaright();
		//printstraight();

		//2. ì—°ì†ëœ ìˆ«ì í­íŒŒ
		while (1) {
			if (!breakstragiht()) break;
			//printstraight();
		}

		//3. ì—°ì†ëœ ìˆ«ìíŒŒì•…í•´ì„œ êµ¬ìŠ¬ì˜ ê°œìˆ˜
		makenewstraight();
		//printstraight();
		//êµ¬ìŠ¬ ë²ˆí˜¸ë¡œ ë§µ ì¬êµ¬ì„±í•˜ê¸°.
		makeball_map();
		//printballmap();
	}
	cout << getscore() << endl;
}
```


ì´ ì½”ë“œëŠ” N*N í¬ê¸°ì˜ ë§µì—ì„œ Mê°œì˜ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” í”„ë¡œê·¸ë¨ì´ë‹¤. ê° ì‘ì—…ì€ ë°©í–¥ dì™€ ê±°ë¦¬ së¥¼ ì…ë ¥ìœ¼ë¡œ ë°›ì•„ í•´ë‹¹ ë°©í–¥ìœ¼ë¡œ ê±°ë¦¬ s ì´í•˜ì˜ ì¹¸ì— ìˆëŠ” êµ¬ìŠ¬ì„ ì œê±°í•˜ëŠ” ê²ƒì´ë‹¤.

í”„ë¡œê·¸ë¨ì€ ë‹¤ìŒê³¼ ê°™ì€ ê³¼ì •ì„ ê±°ì¹œë‹¤:

ì´ˆê¸°í™”: N, Mì„ ì…ë ¥ë°›ê³  ë§µì— êµ¬ìŠ¬ ì •ë³´ë¥¼ ì €ì¥í•œë‹¤.

ê° ì‘ì—…ì„ ìˆ˜í–‰í•˜ë©´ì„œ êµ¬ìŠ¬ì„ ì œê±°í•˜ê³ , ë§µì„ ì¼ì ë°°ì—´ë¡œ ì¬êµ¬ì„±í•œë‹¤.

ì—°ì†ëœ ìˆ«ìë¥¼ í­íŒŒì‹œí‚¤ê³ , ê° ìˆ«ìë³„ë¡œ í­íŒŒí•œ êµ¬ìŠ¬ì˜ ê°œìˆ˜ë¥¼ ì„¼ë‹¤.

ìƒˆë¡œìš´ ì¼ì ë°°ì—´ì„ ë§Œë“¤ì–´ êµ¬ìŠ¬ì˜ ë²ˆí˜¸ì™€ ê°œìˆ˜ë¥¼ ì €ì¥í•˜ê³ , ì´ë¥¼ ë‹¤ì‹œ ë§µì— ë°˜ì˜í•œë‹¤.

ëª¨ë“  ì‘ì—…ì„ ë§ˆì¹˜ë©´ 1ë²ˆ êµ¬ìŠ¬ì˜ ê°œìˆ˜ì— 1ì„ ê³±í•˜ê³ , 2ë²ˆ êµ¬ìŠ¬ì˜ ê°œìˆ˜ì— 2ë¥¼ ê³±í•˜ê³ , 3ë²ˆ êµ¬ìŠ¬ì˜ ê°œìˆ˜ì— 3ì„ ê³±í•œ ë’¤ ì´ë“¤ì„ ëª¨ë‘ ë”í•œ ê°’ì„ ì¶œë ¥í•œë‹¤.

